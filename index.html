<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

    <script>
        var config = {
            type: Phaser.AUTO,
            width: 600,
            height: 600,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 200 }
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var game = new Phaser.Game(config);
        var gameState = [[0, 0, 0],
        [0, 0, 0],
        [0, 0, 0]];
        var turn = 0;

        function preload() {
            this.load.image('x', 'assets/x.png');
            this.load.image('o', 'assets/o.png');
            this.load.image('background', 'assets/background.png');
        }

        function create() {
            var board = this.add.image(300, 300, 'background');
            // var x =  this.add.image(300, 300, 'x');

            // this.input.on('pointerdown', function (pointer) {
            //     this.add.image(pointer.x, pointer.y, 'x');
            // }, this);

            //board zones
            var zone1 = this.add.zone(100, 100, 200, 200).setName('TopLeft').setInteractive();
            var zone2 = this.add.zone(300, 100, 200, 200).setName('Top').setInteractive();
            var zone3 = this.add.zone(500, 100, 200, 200).setName('TopRight').setInteractive();

            var zone4 = this.add.zone(100, 300, 200, 200).setName('Left').setInteractive();
            var zone5 = this.add.zone(300, 300, 200, 200).setName('Middle').setInteractive();
            var zone6 = this.add.zone(500, 300, 200, 200).setName('Right').setInteractive();

            var zone7 = this.add.zone(100, 500, 200, 200).setName('BottomLeft').setInteractive();
            var zone8 = this.add.zone(300, 500, 200, 200).setName('Bottom').setInteractive();
            var zone9 = this.add.zone(500, 500, 200, 200).setName('BottomRight').setInteractive();

            zone1.state = zone2.state = zone3.state = zone4.state = zone5.state = zone6.state = zone7.state = zone8.state = zone9.state = 0

            this.input.on('gameobjectdown', function (pointer, gameObject) {
                if (gameObject.state == 0) {
                    this.add.image(gameObject.x, gameObject.y, turn == 0 ? 'x' : 'o');

                    updateGameState(gameObject);
                    checkGameState();

                    gameObject.state = 1;

                    if (turn == 0) {
                        turn = 1;
                    }
                    else {
                        turn = 0;
                    }
                }

            }, this)

        }

        function update() {

        }

        function updateGameState(gameObject) {
            if (gameObject.name == 'TopLeft') {
                gameState[0][0] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'Top') {
                gameState[0][1] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'TopRight') {
                gameState[0][2] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'Left') {
                gameState[1][0] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'Middle') {
                gameState[1][1] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'Right') {
                gameState[1][2] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'BottomLeft') {
                gameState[2][0] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'Bottom') {
                gameState[2][1] = turn == 0 ? 1 : 2;
            }
            else if (gameObject.name == 'BottomRight') {
                gameState[2][2] = turn == 0 ? 1 : 2;
            }
        }

        function checkGameState() {
            console.log(gameState);
            if(gameState[0][0] == 1 && gameState[0][1] == 1 && gameState[0][2] == 1) {
                alert('X WINS');
            }
        }

    </script>

</body>

</html>